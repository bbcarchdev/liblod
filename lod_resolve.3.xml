<?xml version="1.0" encoding="utf-8"?>
<refentry version="5.0" xml:lang="en" xml:id="lod_resolve-3" xmlns="http://docbook.org/ns" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">
  <info>
	<authorgroup>
	    <author>
		  <personname>
			  <firstname>Mo</firstname>
			    <surname>McRoberts</surname>
		  </personname>
		  <affiliation>
			  <org>
				<orgname>BBC</orgname>
				<orgdiv>Archive Development</orgdiv>
				<uri>http://www.bbc.co.uk/archive/</uri>
			  </org>
		  </affiliation>
		</author>
	</authorgroup>
	<copyright>
	    <year>2014</year>
		  <holder>BBC</holder>
	</copyright>
  </info>

  <refmeta>
	<refentrytitle>lod_resolve</refentrytitle>
	<manvolnum>3</manvolnum>
	<refmiscinfo class="source">Linked Open Data client</refmiscinfo>
	<refmiscinfo class="manual">Library functions</refmiscinfo>
  </refmeta>
  
  <refnamediv>
	<refname>lod_resolve</refname>
	<refpurpose>Resolve a Linked Open Data URI</refpurpose>
  </refnamediv>
  
  <refsynopsisdiv>
	<funcsynopsis>
	  <funcsynopsisinfo>#include &lt;liblod.h&gt;</funcsynopsisinfo>
	  <funcprototype>
		<funcdef>LODINSTANCE *<function>lod_resolve</function></funcdef>
		<paramdef>LODCONTEXT *<parameter>context</parameter></paramdef>
		<paramdef>const char *<parameter>uri</parameter></paramdef>
	  </funcprototype>
	</funcsynopsis>
  </refsynopsisdiv>

  <refsect1>
	<title>Description</title>
	
	<para>
	  <function>lod_resolve</function> attempts to
	  <firstterm>resolve</firstterm> a Linked Open Data URI: that is,
	  perform one or more HTTP requests in order to obtain data describing
	  the subject identified by <parameter>uri</parameter>.
	</para>
	
	<para>
	  In contrast to <function>lod_fetch</function> (which will attempt
	  a network fetch regardless of the existing contents of the context’s
	  model), and <function>lod_locate</function> (which will never attempt
	  a network fetch), the behaviour of <function>lod_resolve</function>
	  is conditional depending upon whether <parameter>uri</parameter> is
	  the subject of a triple within the context’s model.
	</para>

	<para>
	  If such a triple is present, <function>lod_resolve</function> behaves
	  as <function>lod_locate</function>, returning an instance whose subject
	  is <parameter>uri</parameter>.
	</para>
	
	<para>
	  If no such triple could be found, <function>lod_resolve</function>
	  behaves as though <function>lod_fetch</function> had been called
	  instead.
	</para>
  </refsect1>

  <refsect1>
	<title>Return value</title>

	<para>
	  Upon success, <function>lod_resolve</function> returns a new
	  <type>LODINSTANCE</type>, which should be later freed using
	  <function>lod_instance_destroy</function>.
	</para>	

	<para>
	  If an error occurs, or <parameter>uri</parameter> was not
	  a subject of any triple in the data after the fetch completes,
	  <function>lod_resolve</function> returns <constant>NULL</constant>.	  
	</para>

	<para>
	  Use <function>lod_error</function> to determine whether an error
	  occurred, or whether the subject does not exist in the data. If an
	  error does occur, you can use <function>lod_errmsg</function> to
	  obtain a description of the error condition.
	</para>
  </refsect1>

  <refsect1>
	<title>Example</title>
	<programlisting language="c"><![CDATA[LODCONTEXT *ctx;
LODINSTANCE *inst;

ctx = lod_create();
inst = lod_resolve(ctx, "http://www.dbpedialite.org/things/22308#id");
if(!inst)
{
	if(lod_error(ctx))
	{
		/* An error occurred */
	}
	else
	{
		/* No error, but the subject wasn't present */
	}
}
else
{
	/* Triples found */
	lod_instance_destroy(inst);
}
lod_destroy(ctx);]]></programlisting>
  </refsect1>

  <refsect1>
	<title>See also</title>

	<para>
	  <link xlink:href="http://bbcarchdev.github.io/liblod/"><citerefentry><refentrytitle>liblod</refentrytitle><manvolnum>3</manvolnum></citerefentry></link>,
	  <link xlink:href="lod_create.3"><citerefentry><refentrytitle>lod_create</refentrytitle><manvolnum>3</manvolnum></citerefentry></link>,
	  <link xlink:href="lod_error.3"><citerefentry><refentrytitle>lod_error</refentrytitle><manvolnum>3</manvolnum></citerefentry></link>,
	  <link xlink:href="lod_errmsg.3"><citerefentry><refentrytitle>lod_errmsg</refentrytitle><manvolnum>3</manvolnum></citerefentry></link>,
	  <link xlink:href="lod_locate.3"><citerefentry><refentrytitle>lod_locate</refentrytitle><manvolnum>3</manvolnum></citerefentry></link>,
	  <link xlink:href="lod_fetch.3"><citerefentry><refentrytitle>lod_fetch</refentrytitle><manvolnum>3</manvolnum></citerefentry></link>,
	  <link xlink:href="lod_instance_destroy.3"><citerefentry><refentrytitle>lod_instance_destroy</refentrytitle><manvolnum>3</manvolnum></citerefentry></link>,
	  <link xlink:href="lod_instance_stream.3"><citerefentry><refentrytitle>lod_instance_stream</refentrytitle><manvolnum>3</manvolnum></citerefentry></link>,
	  <link xlink:href="http://librdf.org/docs/api/redland-parser.html#librdf-new-parser"><citerefentry><refentrytitle>librdf_parser_create</refentrytitle><manvolnum>3</manvolnum></citerefentry></link>.
	</para>
  </refsect1>

</refentry>